{"version":3,"file":"Tabs-9SYm0EzE.js","sources":["../../../../js/tabs/shared/OverflowIcon.svelte","../../../../js/tabs/shared/Tabs.svelte"],"sourcesContent":["<svg\n\twidth=\"16\"\n\theight=\"16\"\n\tviewBox=\"0 0 16 16\"\n\tfill=\"none\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n>\n\t<circle cx=\"2.5\" cy=\"8\" r=\"1.5\" fill=\"currentColor\" />\n\t<circle cx=\"8\" cy=\"8\" r=\"1.5\" fill=\"currentColor\" />\n\t<circle cx=\"13.5\" cy=\"8\" r=\"1.5\" fill=\"currentColor\" />\n</svg>\n","<script context=\"module\">\n\texport const TABS = {};\n</script>\n\n<script lang=\"ts\">\n\timport {\n\t\tsetContext,\n\t\tcreateEventDispatcher,\n\t\tonMount,\n\t\tonDestroy\n\t} from \"svelte\";\n\timport OverflowIcon from \"./OverflowIcon.svelte\";\n\timport { writable } from \"svelte/store\";\n\timport type { SelectData } from \"@gradio/utils\";\n\n\tinterface Tab {\n\t\tname: string;\n\t\tid: object;\n\t\telem_id: string | undefined;\n\t\tvisible: boolean;\n\t\tinteractive: boolean;\n\t}\n\n\texport let visible = true;\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let selected: number | string | object;\n\n\tlet tabs: Tab[] = [];\n\tlet overflow_menu_open = false;\n\tlet overflow_menu: HTMLElement;\n\n\t$: has_tabs = tabs.length > 0;\n\n\tlet tab_nav_el: HTMLElement;\n\tlet overflow_nav: HTMLElement;\n\n\tconst selected_tab = writable<false | object | number | string>(false);\n\tconst selected_tab_index = writable<number>(0);\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: undefined;\n\t\tselect: SelectData;\n\t}>();\n\n\tlet is_overflowing = false;\n\tlet overflow_has_selected_tab = false;\n\n\tsetContext(TABS, {\n\t\tregister_tab: (tab: Tab) => {\n\t\t\tlet index = tabs.findIndex((t) => t.id === tab.id);\n\t\t\tif (index !== -1) {\n\t\t\t\ttabs[index] = { ...tabs[index], ...tab };\n\t\t\t} else {\n\t\t\t\ttabs = [...tabs, tab];\n\t\t\t\tindex = tabs.length - 1;\n\t\t\t}\n\t\t\tif ($selected_tab === false && tab.visible && tab.interactive) {\n\t\t\t\t$selected_tab = tab.id;\n\t\t\t}\n\t\t\treturn index;\n\t\t},\n\t\tunregister_tab: (tab: Tab) => {\n\t\t\tconst index = tabs.findIndex((t) => t.id === tab.id);\n\t\t\tif (index !== -1) {\n\t\t\t\ttabs = tabs.filter((t) => t.id !== tab.id);\n\t\t\t\tif ($selected_tab === tab.id) {\n\t\t\t\t\t$selected_tab = tabs[0]?.id || false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselected_tab,\n\t\tselected_tab_index\n\t});\n\n\tfunction change_tab(id: object | string | number): void {\n\t\tconst tab_to_activate = tabs.find((t) => t.id === id);\n\t\tif (\n\t\t\ttab_to_activate &&\n\t\t\ttab_to_activate.interactive &&\n\t\t\ttab_to_activate.visible\n\t\t) {\n\t\t\tselected = id;\n\t\t\t$selected_tab = id;\n\t\t\t$selected_tab_index = tabs.findIndex((t) => t.id === id);\n\t\t\tdispatch(\"change\");\n\t\t\toverflow_menu_open = false;\n\t\t} else {\n\t\t\tconsole.warn(\"Attempted to select a non-interactive or hidden tab.\");\n\t\t}\n\t}\n\n\t$: tabs, selected !== null && change_tab(selected);\n\n\tonMount(() => {\n\t\thandle_menu_overflow();\n\n\t\twindow.addEventListener(\"resize\", handle_menu_overflow);\n\t\twindow.addEventListener(\"click\", handle_outside_click);\n\t});\n\n\tonDestroy(() => {\n\t\tif (typeof window === \"undefined\") return;\n\t\twindow.removeEventListener(\"resize\", handle_menu_overflow);\n\t\twindow.removeEventListener(\"click\", handle_outside_click);\n\t});\n\n\tfunction handle_outside_click(event: MouseEvent): void {\n\t\tif (\n\t\t\toverflow_menu_open &&\n\t\t\toverflow_menu &&\n\t\t\t!overflow_menu.contains(event.target as Node)\n\t\t) {\n\t\t\toverflow_menu_open = false;\n\t\t}\n\t}\n\n\tfunction handle_menu_overflow(): void {\n\t\tif (!tab_nav_el) {\n\t\t\tconsole.error(\"Menu elements not found\");\n\t\t\treturn;\n\t\t}\n\n\t\tlet all_items: HTMLElement[] = [];\n\n\t\t[tab_nav_el, overflow_nav].forEach((menu) => {\n\t\t\tArray.from(menu.querySelectorAll(\"button\")).forEach((item) =>\n\t\t\t\tall_items.push(item as HTMLElement)\n\t\t\t);\n\t\t});\n\n\t\tall_items.forEach((item) => tab_nav_el.appendChild(item));\n\n\t\tconst nav_items: HTMLElement[] = [];\n\t\tconst overflow_items: HTMLElement[] = [];\n\n\t\tArray.from(tab_nav_el.querySelectorAll(\"button\")).forEach((item) => {\n\t\t\tconst tab_rect = item.getBoundingClientRect();\n\t\t\tconst tab_menu_rect = tab_nav_el.getBoundingClientRect();\n\t\t\tis_overflowing =\n\t\t\t\ttab_rect.right > tab_menu_rect.right ||\n\t\t\t\ttab_rect.left < tab_menu_rect.left;\n\n\t\t\tif (is_overflowing) {\n\t\t\t\toverflow_items.push(item as HTMLElement);\n\t\t\t} else {\n\t\t\t\tnav_items.push(item as HTMLElement);\n\t\t\t}\n\t\t});\n\n\t\tnav_items.forEach((item) => tab_nav_el.appendChild(item));\n\t\toverflow_items.forEach((item) => overflow_nav.appendChild(item));\n\n\t\toverflow_has_selected_tab = tabs.some(\n\t\t\t(t) =>\n\t\t\t\tt.id === $selected_tab &&\n\t\t\t\toverflow_nav.contains(document.querySelector(`[data-tab-id=\"${t.id}\"]`))\n\t\t);\n\t}\n</script>\n\n{#if has_tabs}\n\t<div class=\"tabs {elem_classes.join(' ')}\" class:hide={!visible} id={elem_id}>\n\t\t<div class=\"tab-wrapper\">\n\t\t\t<div class=\"tab-container\" bind:this={tab_nav_el} role=\"tablist\">\n\t\t\t\t{#each tabs as t, i (t.id)}\n\t\t\t\t\t<button\n\t\t\t\t\t\trole=\"tab\"\n\t\t\t\t\t\tclass:selected={t.id === $selected_tab}\n\t\t\t\t\t\taria-selected={t.id === $selected_tab}\n\t\t\t\t\t\taria-controls={t.elem_id}\n\t\t\t\t\t\tdisabled={!t.interactive}\n\t\t\t\t\t\taria-disabled={!t.interactive}\n\t\t\t\t\t\tid={t.elem_id ? t.elem_id + \"-button\" : null}\n\t\t\t\t\t\tdata-tab-id={t.id}\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tif (t.id !== $selected_tab) {\n\t\t\t\t\t\t\t\tchange_tab(t.id);\n\t\t\t\t\t\t\t\tdispatch(\"select\", { value: t.name, index: i });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t.name}\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t\t<span\n\t\t\t\tclass=\"overflow-menu\"\n\t\t\t\tclass:hide={!is_overflowing}\n\t\t\t\tbind:this={overflow_menu}\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\ton:click|stopPropagation={() =>\n\t\t\t\t\t\t(overflow_menu_open = !overflow_menu_open)}\n\t\t\t\t\tclass:overflow-item-selected={overflow_has_selected_tab}\n\t\t\t\t>\n\t\t\t\t\t<OverflowIcon />\n\t\t\t\t</button>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"overflow-dropdown\"\n\t\t\t\t\tbind:this={overflow_nav}\n\t\t\t\t\tclass:hide={!overflow_menu_open}\n\t\t\t\t/>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n{/if}\n\n<slot />\n\n<style>\n\t.tabs {\n\t\tposition: relative;\n\t}\n\n\t.hide {\n\t\tdisplay: none;\n\t}\n\n\t.tab-wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tposition: relative;\n\t\theight: var(--size-8);\n\t\tpadding-bottom: var(--size-2);\n\t}\n\n\t.tab-container {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t\theight: var(--size-8);\n\t}\n\n\t.tab-container::after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 1px;\n\t\tbackground-color: var(--border-color-primary);\n\t}\n\n\t.overflow-menu {\n\t\tflex-shrink: 0;\n\t\tmargin-left: var(--size-2);\n\t}\n\n\tbutton {\n\t\tmargin-bottom: 0;\n\t\tborder: none;\n\t\tborder-radius: 0;\n\t\tpadding: 0 var(--size-4);\n\t\tcolor: var(--body-text-color);\n\t\tfont-weight: var(--section-header-text-weight);\n\t\tfont-size: var(--section-header-text-size);\n\t\ttransition: all 0.2s ease-out;\n\t\tbackground-color: transparent;\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\twhite-space: nowrap;\n\t\tposition: relative;\n\t}\n\n\tbutton:disabled {\n\t\topacity: 0.5;\n\t\tcursor: not-allowed;\n\t}\n\n\tbutton:hover:not(:disabled):not(.selected) {\n\t\tbackground-color: var(--background-fill-secondary);\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.selected {\n\t\tbackground-color: transparent;\n\t\tcolor: var(--color-accent);\n\t\tposition: relative;\n\t}\n\n\t.selected::after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 2px;\n\t\tbackground-color: var(--color-accent);\n\t\tanimation: fade-grow 0.2s ease-out forwards;\n\t\ttransform-origin: center;\n\t\tz-index: 1;\n\t}\n\n\t@keyframes fade-grow {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: scaleX(0.8);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: scaleX(1);\n\t\t}\n\t}\n\n\t.overflow-dropdown {\n\t\tposition: absolute;\n\t\ttop: calc(100% + var(--size-2));\n\t\tright: 0;\n\t\tbackground-color: var(--background-fill-primary);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tz-index: var(--layer-5);\n\t\tbox-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n\t\tpadding: var(--size-2);\n\t\tmin-width: 150px;\n\t\twidth: max-content;\n\t}\n\n\t.overflow-dropdown button {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\ttext-align: left;\n\t\tpadding: var(--size-2);\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\t.overflow-menu > button {\n\t\tpadding: var(--size-1) var(--size-2);\n\t\tmin-width: auto;\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.overflow-menu > button:hover {\n\t\tbackground-color: var(--background-fill-secondary);\n\t}\n\n\t.overflow-menu :global(svg) {\n\t\twidth: 16px;\n\t\theight: 16px;\n\t}\n\n\t.overflow-item-selected :global(svg) {\n\t\tcolor: var(--color-accent);\n\t}\n</style>\n"],"names":["insert","target","svg","anchor","append","circle0","circle1","circle2","setContext","onMount","onDestroy","ctx","get_key","i","div3","div2","div0","span","button","div1","t0_value","attr","button_aria_controls_value","button_disabled_value","button_aria_disabled_value","button_id_value","button_data_tab_id_value","dirty","set_data","t0","create_if_block","TABS","visible","$$props","elem_id","elem_classes","selected","tabs","overflow_menu_open","overflow_menu","tab_nav_el","overflow_nav","selected_tab","writable","selected_tab_index","dispatch","createEventDispatcher","is_overflowing","overflow_has_selected_tab","tab","index","t","$$invalidate","$selected_tab","set_store_value","change_tab","id","tab_to_activate","$selected_tab_index","handle_menu_overflow","handle_outside_click","event","all_items","menu","item","nav_items","overflow_items","tab_rect","tab_menu_rect","$$value","click_handler_1","has_tabs"],"mappings":"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"}