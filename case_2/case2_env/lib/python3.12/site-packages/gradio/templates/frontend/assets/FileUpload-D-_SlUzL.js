import"./IconButtonWrapper.svelte_svelte_type_style_lang-DtmdC81T.js";import{F as le}from"./File-BQ_9P3Ye.js";import"./Example.svelte_svelte_type_style_lang-Cqm5zhmZ.js";import{B as me}from"./BlockLabel-BZVM33rA.js";import{E as ve}from"./Empty-BNDtRLIn.js";import{U as $e}from"./Upload-CFneyO_L.js";import{M as ye}from"./ModifyUpload-CYpte4eB.js";import{D as ze}from"./DownloadLink-CoHnReV-.js";const ne=i=>{let e=["B","KB","MB","GB","PB"],l=0;for(;i>1024;)i/=1024,l++;let t=e[l];return i.toFixed(1)+"&nbsp;"+t},{HtmlTag:qe,SvelteComponent:Fe,append:$,attr:y,check_outros:be,create_component:Be,destroy_component:Ce,detach:I,element:B,ensure_array_like:ie,flush:T,group_outros:we,init:Ee,insert:L,listen:Z,mount_component:Ae,noop:se,outro_and_destroy_block:De,run_all:Se,safe_not_equal:Ue,set_data:x,set_style:oe,space:G,text:K,toggle_class:ae,transition_in:O,transition_out:R,update_keyed_each:Me}=window.__gradio__svelte__internal,{createEventDispatcher:Pe}=window.__gradio__svelte__internal;function re(i,e,l){const t=i.slice();return t[12]=e[l],t[14]=l,t}function Ie(i){let e=i[2]("file.uploading")+"",l;return{c(){l=K(e)},m(t,n){L(t,l,n)},p(t,n){n&4&&e!==(e=t[2]("file.uploading")+"")&&x(l,e)},i:se,o:se,d(t){t&&I(l)}}}function Le(i){let e,l;return e=new ze({props:{href:i[12].url,download:i[6]&&window.__is_colab__?null:i[12].orig_name,$$slots:{default:[Ne]},$$scope:{ctx:i}}}),{c(){Be(e.$$.fragment)},m(t,n){Ae(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.href=t[12].url),n&8&&(s.download=t[6]&&window.__is_colab__?null:t[12].orig_name),n&32776&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){Ce(e,t)}}}function Ne(i){let e,l=(i[12].size!=null?ne(i[12].size):"(size unknown)")+"",t;return{c(){e=new qe(!1),t=K(" ⇣"),e.a=t},m(n,s){e.m(l,n,s),L(n,t,s)},p(n,s){s&8&&l!==(l=(n[12].size!=null?ne(n[12].size):"(size unknown)")+"")&&e.p(l)},d(n){n&&(e.d(),I(t))}}}function ue(i){let e,l,t,n;function s(){return i[8](i[14])}function f(...c){return i[9](i[14],...c)}return{c(){e=B("td"),l=B("button"),l.textContent="×",y(l,"class","label-clear-button svelte-18wv37q"),y(l,"aria-label","Remove this file"),y(e,"class","svelte-18wv37q")},m(c,u){L(c,e,u),$(e,l),t||(n=[Z(l,"click",s),Z(l,"keydown",f)],t=!0)},p(c,u){i=c},d(c){c&&I(e),t=!1,Se(n)}}}function _e(i,e){let l,t,n,s=e[12].filename_stem+"",f,c,u,a=e[12].filename_ext+"",r,o,g,m,d,h,b,k,q,P,C;const E=[Le,Ie],F=[];function N(p,z){return p[12].url?0:1}d=N(e),h=F[d]=E[d](e);let w=e[3].length>1&&ue(e);function Y(...p){return e[10](e[14],...p)}return{key:i,first:null,c(){l=B("tr"),t=B("td"),n=B("span"),f=K(s),c=G(),u=B("span"),r=K(a),g=G(),m=B("td"),h.c(),b=G(),w&&w.c(),k=G(),y(n,"class","stem svelte-18wv37q"),y(u,"class","ext svelte-18wv37q"),y(t,"class","filename svelte-18wv37q"),y(t,"aria-label",o=e[12].orig_name),y(m,"class","download svelte-18wv37q"),y(l,"class","file svelte-18wv37q"),ae(l,"selectable",e[0]),this.first=l},m(p,z){L(p,l,z),$(l,t),$(t,n),$(n,f),$(t,c),$(t,u),$(u,r),$(l,g),$(l,m),F[d].m(m,null),$(l,b),w&&w.m(l,null),$(l,k),q=!0,P||(C=Z(l,"click",Y),P=!0)},p(p,z){e=p,(!q||z&8)&&s!==(s=e[12].filename_stem+"")&&x(f,s),(!q||z&8)&&a!==(a=e[12].filename_ext+"")&&x(r,a),(!q||z&8&&o!==(o=e[12].orig_name))&&y(t,"aria-label",o);let _=d;d=N(e),d===_?F[d].p(e,z):(we(),R(F[_],1,1,()=>{F[_]=null}),be(),h=F[d],h?h.p(e,z):(h=F[d]=E[d](e),h.c()),O(h,1),h.m(m,null)),e[3].length>1?w?w.p(e,z):(w=ue(e),w.c(),w.m(l,k)):w&&(w.d(1),w=null),(!q||z&1)&&ae(l,"selectable",e[0])},i(p){q||(O(h),q=!0)},o(p){R(h),q=!1},d(p){p&&I(l),F[d].d(),w&&w.d(),P=!1,C()}}}function Te(i){let e,l,t,n=[],s=new Map,f,c=ie(i[3]);const u=a=>a[12];for(let a=0;a<c.length;a+=1){let r=re(i,c,a),o=u(r);s.set(o,n[a]=_e(o,r))}return{c(){e=B("div"),l=B("table"),t=B("tbody");for(let a=0;a<n.length;a+=1)n[a].c();y(t,"class","svelte-18wv37q"),y(l,"class","file-preview svelte-18wv37q"),y(e,"class","file-preview-holder svelte-18wv37q"),oe(e,"max-height",typeof i[1]===void 0?"auto":i[1]+"px")},m(a,r){L(a,e,r),$(e,l),$(l,t);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,null);f=!0},p(a,[r]){r&125&&(c=ie(a[3]),we(),n=Me(n,r,u,1,a,c,s,t,De,_e,null,re),be()),(!f||r&2)&&oe(e,"max-height",typeof a[1]===void 0?"auto":a[1]+"px")},i(a){if(!f){for(let r=0;r<c.length;r+=1)O(n[r]);f=!0}},o(a){for(let r=0;r<n.length;r+=1)R(n[r]);f=!1},d(a){a&&I(e);for(let r=0;r<n.length;r+=1)n[r].d()}}}function Ge(i){const e=i.lastIndexOf(".");return e===-1?[i,""]:[i.slice(0,e),i.slice(e)]}function He(i,e,l){let t;const n=Pe();let{value:s}=e,{selectable:f=!1}=e,{height:c=void 0}=e,{i18n:u}=e;function a(h,b){const k=h.currentTarget;(h.target===k||k&&k.firstElementChild&&h.composedPath().includes(k.firstElementChild))&&n("select",{value:t[b].orig_name,index:b})}function r(h){const b=t.splice(h,1);l(3,t=[...t]),l(7,s=t),n("delete",b[0]),n("change",t)}const o=typeof window<"u",g=h=>{r(h)},m=(h,b)=>{b.key==="Enter"&&r(h)},d=(h,b)=>{a(b,h)};return i.$$set=h=>{"value"in h&&l(7,s=h.value),"selectable"in h&&l(0,f=h.selectable),"height"in h&&l(1,c=h.height),"i18n"in h&&l(2,u=h.i18n)},i.$$.update=()=>{i.$$.dirty&128&&l(3,t=(Array.isArray(s)?s:[s]).map(h=>{const[b,k]=Ge(h.orig_name??"");return{...h,filename_stem:b,filename_ext:k}}))},[f,c,u,t,a,r,o,s,g,m,d]}class Ke extends Fe{constructor(e){super(),Ee(this,e,He,Te,Ue,{value:7,selectable:0,height:1,i18n:2})}get value(){return this.$$.ctx[7]}set value(e){this.$$set({value:e}),T()}get selectable(){return this.$$.ctx[0]}set selectable(e){this.$$set({selectable:e}),T()}get height(){return this.$$.ctx[1]}set height(e){this.$$set({height:e}),T()}get i18n(){return this.$$.ctx[2]}set i18n(e){this.$$set({i18n:e}),T()}}const ke=Ke,{SvelteComponent:Oe,bubble:Re,check_outros:je,create_component:V,destroy_component:W,detach:fe,empty:Je,flush:S,group_outros:Qe,init:Ve,insert:ce,mount_component:X,safe_not_equal:We,space:Xe,transition_in:U,transition_out:M}=window.__gradio__svelte__internal;function Ye(i){let e,l;return e=new ve({props:{unpadded_box:!0,size:"large",$$slots:{default:[xe]},$$scope:{ctx:i}}}),{c(){V(e.$$.fragment)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&128&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){M(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function Ze(i){let e,l;return e=new ke({props:{i18n:i[5],selectable:i[3],value:i[0],height:i[4]}}),e.$on("select",i[6]),{c(){V(e.$$.fragment)},m(t,n){X(e,t,n),l=!0},p(t,n){const s={};n&32&&(s.i18n=t[5]),n&8&&(s.selectable=t[3]),n&1&&(s.value=t[0]),n&16&&(s.height=t[4]),e.$set(s)},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){M(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function xe(i){let e,l;return e=new le({}),{c(){V(e.$$.fragment)},m(t,n){X(e,t,n),l=!0},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){M(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function et(i){let e,l,t,n,s,f,c;e=new me({props:{show_label:i[2],float:i[0]===null,Icon:le,label:i[1]||"File"}});const u=[Ze,Ye],a=[];function r(o,g){return g&1&&(t=null),t==null&&(t=!!(o[0]&&(!Array.isArray(o[0])||o[0].length>0))),t?0:1}return n=r(i,-1),s=a[n]=u[n](i),{c(){V(e.$$.fragment),l=Xe(),s.c(),f=Je()},m(o,g){X(e,o,g),ce(o,l,g),a[n].m(o,g),ce(o,f,g),c=!0},p(o,[g]){const m={};g&4&&(m.show_label=o[2]),g&1&&(m.float=o[0]===null),g&2&&(m.label=o[1]||"File"),e.$set(m);let d=n;n=r(o,g),n===d?a[n].p(o,g):(Qe(),M(a[d],1,1,()=>{a[d]=null}),je(),s=a[n],s?s.p(o,g):(s=a[n]=u[n](o),s.c()),U(s,1),s.m(f.parentNode,f))},i(o){c||(U(e.$$.fragment,o),U(s),c=!0)},o(o){M(e.$$.fragment,o),M(s),c=!1},d(o){o&&(fe(l),fe(f)),W(e,o),a[n].d(o)}}}function tt(i,e,l){let{value:t=null}=e,{label:n}=e,{show_label:s=!0}=e,{selectable:f=!1}=e,{height:c=void 0}=e,{i18n:u}=e;function a(r){Re.call(this,i,r)}return i.$$set=r=>{"value"in r&&l(0,t=r.value),"label"in r&&l(1,n=r.label),"show_label"in r&&l(2,s=r.show_label),"selectable"in r&&l(3,f=r.selectable),"height"in r&&l(4,c=r.height),"i18n"in r&&l(5,u=r.i18n)},[t,n,s,f,c,u,a]}class lt extends Oe{constructor(e){super(),Ve(this,e,tt,et,We,{value:0,label:1,show_label:2,selectable:3,height:4,i18n:5})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),S()}get label(){return this.$$.ctx[1]}set label(e){this.$$set({label:e}),S()}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),S()}get selectable(){return this.$$.ctx[3]}set selectable(e){this.$$set({selectable:e}),S()}get height(){return this.$$.ctx[4]}set height(e){this.$$set({height:e}),S()}get i18n(){return this.$$.ctx[5]}set i18n(e){this.$$set({i18n:e}),S()}}const Et=lt,{SvelteComponent:nt,add_flush_callback:he,bind:ge,binding_callbacks:de,bubble:H,check_outros:it,create_component:j,create_slot:st,destroy_component:J,detach:ee,empty:ot,flush:v,get_all_dirty_from_scope:at,get_slot_changes:rt,group_outros:ut,init:_t,insert:te,mount_component:Q,safe_not_equal:ft,space:pe,transition_in:A,transition_out:D,update_slot_base:ct}=window.__gradio__svelte__internal,{createEventDispatcher:ht,tick:gt}=window.__gradio__svelte__internal;function dt(i){let e,l,t,n;function s(u){i[20](u)}function f(u){i[21](u)}let c={filetype:i[5],file_count:i[4],max_file_size:i[10],root:i[7],stream_handler:i[12],upload:i[11],$$slots:{default:[bt]},$$scope:{ctx:i}};return i[13]!==void 0&&(c.dragging=i[13]),i[1]!==void 0&&(c.uploading=i[1]),e=new $e({props:c}),de.push(()=>ge(e,"dragging",s)),de.push(()=>ge(e,"uploading",f)),e.$on("load",i[14]),e.$on("error",i[22]),{c(){j(e.$$.fragment)},m(u,a){Q(e,u,a),n=!0},p(u,a){const r={};a&32&&(r.filetype=u[5]),a&16&&(r.file_count=u[4]),a&1024&&(r.max_file_size=u[10]),a&128&&(r.root=u[7]),a&4096&&(r.stream_handler=u[12]),a&2048&&(r.upload=u[11]),a&8388608&&(r.$$scope={dirty:a,ctx:u}),!l&&a&8192&&(l=!0,r.dragging=u[13],he(()=>l=!1)),!t&&a&2&&(t=!0,r.uploading=u[1],he(()=>t=!1)),e.$set(r)},i(u){n||(A(e.$$.fragment,u),n=!0)},o(u){D(e.$$.fragment,u),n=!1},d(u){J(e,u)}}}function mt(i){let e,l,t,n;return e=new ye({props:{i18n:i[9]}}),e.$on("clear",i[15]),t=new ke({props:{i18n:i[9],selectable:i[6],value:i[0],height:i[8]}}),t.$on("select",i[17]),t.$on("change",i[18]),t.$on("delete",i[19]),{c(){j(e.$$.fragment),l=pe(),j(t.$$.fragment)},m(s,f){Q(e,s,f),te(s,l,f),Q(t,s,f),n=!0},p(s,f){const c={};f&512&&(c.i18n=s[9]),e.$set(c);const u={};f&512&&(u.i18n=s[9]),f&64&&(u.selectable=s[6]),f&1&&(u.value=s[0]),f&256&&(u.height=s[8]),t.$set(u)},i(s){n||(A(e.$$.fragment,s),A(t.$$.fragment,s),n=!0)},o(s){D(e.$$.fragment,s),D(t.$$.fragment,s),n=!1},d(s){s&&ee(l),J(e,s),J(t,s)}}}function bt(i){let e;const l=i[16].default,t=st(l,i,i[23],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8388608)&&ct(t,l,n,n[23],e?rt(l,n[23],s,null):at(n[23]),null)},i(n){e||(A(t,n),e=!0)},o(n){D(t,n),e=!1},d(n){t&&t.d(n)}}}function wt(i){let e,l,t,n,s,f,c;e=new me({props:{show_label:i[3],Icon:le,float:!i[0],label:i[2]||"File"}});const u=[mt,dt],a=[];function r(o,g){return g&1&&(t=null),t==null&&(t=!!(o[0]&&(!Array.isArray(o[0])||o[0].length>0))),t?0:1}return n=r(i,-1),s=a[n]=u[n](i),{c(){j(e.$$.fragment),l=pe(),s.c(),f=ot()},m(o,g){Q(e,o,g),te(o,l,g),a[n].m(o,g),te(o,f,g),c=!0},p(o,[g]){const m={};g&8&&(m.show_label=o[3]),g&1&&(m.float=!o[0]),g&4&&(m.label=o[2]||"File"),e.$set(m);let d=n;n=r(o,g),n===d?a[n].p(o,g):(ut(),D(a[d],1,1,()=>{a[d]=null}),it(),s=a[n],s?s.p(o,g):(s=a[n]=u[n](o),s.c()),A(s,1),s.m(f.parentNode,f))},i(o){c||(A(e.$$.fragment,o),A(s),c=!0)},o(o){D(e.$$.fragment,o),D(s),c=!1},d(o){o&&(ee(l),ee(f)),J(e,o),a[n].d(o)}}}function kt(i,e,l){let{$$slots:t={},$$scope:n}=e,{value:s}=e,{label:f}=e,{show_label:c=!0}=e,{file_count:u="single"}=e,{file_types:a=null}=e,{selectable:r=!1}=e,{root:o}=e,{height:g=void 0}=e,{i18n:m}=e,{max_file_size:d=null}=e,{upload:h}=e,{stream_handler:b}=e,{uploading:k=!1}=e;async function q({detail:_}){l(0,s=_),await gt(),C("change",s),C("upload",_)}function P(){l(0,s=null),C("change",null),C("clear")}const C=ht();let E=!1;function F(_){H.call(this,i,_)}function N(_){H.call(this,i,_)}function w(_){H.call(this,i,_)}function Y(_){E=_,l(13,E)}function p(_){k=_,l(1,k)}function z(_){H.call(this,i,_)}return i.$$set=_=>{"value"in _&&l(0,s=_.value),"label"in _&&l(2,f=_.label),"show_label"in _&&l(3,c=_.show_label),"file_count"in _&&l(4,u=_.file_count),"file_types"in _&&l(5,a=_.file_types),"selectable"in _&&l(6,r=_.selectable),"root"in _&&l(7,o=_.root),"height"in _&&l(8,g=_.height),"i18n"in _&&l(9,m=_.i18n),"max_file_size"in _&&l(10,d=_.max_file_size),"upload"in _&&l(11,h=_.upload),"stream_handler"in _&&l(12,b=_.stream_handler),"uploading"in _&&l(1,k=_.uploading),"$$scope"in _&&l(23,n=_.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&C("drag",E)},[s,k,f,c,u,a,r,o,g,m,d,h,b,E,q,P,t,F,N,w,Y,p,z,n]}class pt extends nt{constructor(e){super(),_t(this,e,kt,wt,ft,{value:0,label:2,show_label:3,file_count:4,file_types:5,selectable:6,root:7,height:8,i18n:9,max_file_size:10,upload:11,stream_handler:12,uploading:1})}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),v()}get label(){return this.$$.ctx[2]}set label(e){this.$$set({label:e}),v()}get show_label(){return this.$$.ctx[3]}set show_label(e){this.$$set({show_label:e}),v()}get file_count(){return this.$$.ctx[4]}set file_count(e){this.$$set({file_count:e}),v()}get file_types(){return this.$$.ctx[5]}set file_types(e){this.$$set({file_types:e}),v()}get selectable(){return this.$$.ctx[6]}set selectable(e){this.$$set({selectable:e}),v()}get root(){return this.$$.ctx[7]}set root(e){this.$$set({root:e}),v()}get height(){return this.$$.ctx[8]}set height(e){this.$$set({height:e}),v()}get i18n(){return this.$$.ctx[9]}set i18n(e){this.$$set({i18n:e}),v()}get max_file_size(){return this.$$.ctx[10]}set max_file_size(e){this.$$set({max_file_size:e}),v()}get upload(){return this.$$.ctx[11]}set upload(e){this.$$set({upload:e}),v()}get stream_handler(){return this.$$.ctx[12]}set stream_handler(e){this.$$set({stream_handler:e}),v()}get uploading(){return this.$$.ctx[1]}set uploading(e){this.$$set({uploading:e}),v()}}const At=pt;export{At as B,Et as F,ke as a};
//# sourceMappingURL=FileUpload-D-_SlUzL.js.map
